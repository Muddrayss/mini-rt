==106131== Memcheck, a memory error detector
==106131== Copyright (C) 2002-2017, and GNU GPL'd, by Julian Seward et al.
==106131== Using Valgrind-3.15.0 and LibVEX; rerun with -h for copyright info
==106131== Command: ./minirt scenes/italian_flag.rt
==106131== 
==106131== Thread 2:
==106131== Invalid write of size 4
==106131==    at 0x40822D: my_mlx_pixel_put (mlx_utils.c:21)
==106131==    by 0x40514A: render_segment (render.c:96)
==106131==    by 0x4B29608: start_thread (pthread_create.c:477)
==106131==    by 0x4C65352: clone (clone.S:95)
==106131==  Address 0x4dce6e8 is 0 bytes after a block of size 88 alloc'd
==106131==    at 0x483DD99: calloc (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
==106131==    by 0x4099FB: mlx_int_new_xshm_image (in /nfs/homes/craimond/Desktop/MiniRT/MiniRT_GitHub/minirt)
==106131==    by 0x409D12: mlx_new_image (in /nfs/homes/craimond/Desktop/MiniRT/MiniRT_GitHub/minirt)
==106131==    by 0x40284B: init_window (init.c:51)
==106131==    by 0x4025EC: main (minirt.c:28)
==106131== 
--106131-- VALGRIND INTERNAL ERROR: Valgrind received a signal 11 (SIGSEGV) - exiting
--106131-- si_code=128;  Faulting address: 0x0;  sp: 0x100b39ae10

valgrind: the 'impossible' happened:
   Killed by fatal signal

host stacktrace:
==106131==    at 0x5805200D: ??? (in /usr/lib/x86_64-linux-gnu/valgrind/memcheck-amd64-linux)
==106131==    by 0x58004EBB: ??? (in /usr/lib/x86_64-linux-gnu/valgrind/memcheck-amd64-linux)
==106131==    by 0x58005C44: ??? (in /usr/lib/x86_64-linux-gnu/valgrind/memcheck-amd64-linux)
==106131==    by 0x580A7204: ??? (in /usr/lib/x86_64-linux-gnu/valgrind/memcheck-amd64-linux)
==106131==    by 0x580F5FD4: ??? (in /usr/lib/x86_64-linux-gnu/valgrind/memcheck-amd64-linux)
==106131==    by 0x580F62D0: ??? (in /usr/lib/x86_64-linux-gnu/valgrind/memcheck-amd64-linux)
==106131==    by 0x580B88ED: ??? (in /usr/lib/x86_64-linux-gnu/valgrind/memcheck-amd64-linux)
==106131==    by 0xDEADBEEFDEADBEEE: ???
==106131==    by 0xDEADBEEFDEADBEEE: ???
==106131==    by 0xDEADBEEFDEADBEEE: ???

sched status:
  running_tid=2

Thread 1: status = VgTs_WaitSys syscall 202 (lwpid 106131)
==106131==    at 0x4B2ACD7: __pthread_clockjoin_ex (pthread_join_common.c:145)
==106131==    by 0x404C05: render (render.c:60)
==106131==    by 0x402653: main (minirt.c:30)
client stack range: [0x1FFEFFE000 0x1FFF000FFF] client SP: 0x1FFEFFFDE0
valgrind stack range: [0x1008BAE000 0x1008CADFFF] top usage: 18696 of 1048576

Thread 2: status = VgTs_Runnable (lwpid 106144)
==106131==    at 0x483B7F3: malloc (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
==106131==    by 0x40583D: trace_ray (render.c:288)
==106131==    by 0x4053A5: ray_bouncing (render.c:234)
==106131==    by 0x4050D8: render_segment (render.c:93)
==106131==    by 0x4B29608: start_thread (pthread_create.c:477)
==106131==    by 0x4C65352: clone (clone.S:95)
client stack range: [0x523F000 0x5A3DFFF] client SP: 0x5A3DCA0
valgrind stack range: [0x100B29B000 0x100B39AFFF] top usage: 7288 of 1048576


Note: see also the FAQ in the source distribution.
It contains workarounds to several common problems.
In particular, if Valgrind aborted or crashed after
identifying problems in your program, there's a good chance
that fixing those problems will prevent Valgrind aborting or
crashing, especially if it happened in m_mallocfree.c.

If that doesn't help, please report this bug to: www.valgrind.org

In the bug report, send all the above text, the valgrind
version, and what OS and version you are using.  Thanks.

